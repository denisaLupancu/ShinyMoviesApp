df <- fuel_economy_2018 %>%
transmute (cty_l100km, hwy_l100km,
air_pollution_score = `Air Pollution Score`,
greenhouse_gas_score = `Greenhouse Gas Score`,
vehicle_class = `Veh Class`) %>%
mutate (id = row_number()) %>%
pivot_longer(c(-id, -vehicle_class),
names_to = "variable", values_to = "value" ) %>%
arrange(variable, vehicle_class)
select(Model:Fuel, `Veh.Class`, `Air Pollution Score`,
`Greenhouse Gas Score`, SmartWay, cty_l100km:manufacturer)
fuel_economy_2018 <- read_tsv("all_alpha_18.txt") %>%
fuel_economy_2018 %>%
mutate(cty_l100km = round(235.214583333333 / as.numeric(City.MPG), 2),
hwy_l100km = round(235.214583333333 / as.numeric(`Hwy.MPG`), 2),
combined_l100km = round(235.214583333333 / as.numeric(`Cmb.MPG`), 2))
fuel_economy_2018 <- read_tsv("all_alpha_18.txt") %>%
fuel_economy_2018 %>%
mutate(cty_l100km = round(235.214583333333 / as.numeric(City.MPG), 2),
hwy_l100km = round(235.214583333333 / as.numeric(`Hwy.MPG`), 2),
combined_l100km = round(235.214583333333 / as.numeric(`Cmb.MPG`), 2))
fuel_economy_2018<- read.table("C:/Users/Gabi/Downloads/all_alpha_18.txt", sep = "\t", header = TRUE)
fuel_economy_2018 <- read_tsv("all_alpha_18.txt") %>%
fuel_economy_2018 %>%
mutate(cty_l100km = round(235.214583333333 / as.numeric(City.MPG), 2),
hwy_l100km = round(235.214583333333 / as.numeric(`Hwy.MPG`), 2),
combined_l100km = round(235.214583333333 / as.numeric(`Cmb.MPG`), 2)) %>%
mutate(manufacturer = word(Model)) %>%
mutate(manufacturer = case_when(
manufacturer == 'ACURA' ~ 'HONDA',
manufacturer == 'ASTON' ~ 'ASTON MARTIN',
manufacturer == 'ALFA' ~ 'FIAT',
manufacturer %in% c('BUICK', 'CADILLAC', 'CHEVROLET', 'GMC') ~ 'GENERAL MOTORS',
manufacturer %in% c('DODGE', 'JEEP', 'RAM') ~ 'CHRYSLER',
manufacturer == 'GENESIS' ~ 'HYUNDAI',
manufacturer == 'INFINITI' ~ 'NISSAN',
manufacturer == 'JAGUAR' | str_detect(manufacturer, '(^LAND|^RANGE)|ROVER') ~ 'TATA MOTORS',
manufacturer == 'LEXUS' ~ 'TOYOTA',
manufacturer == 'LINCOLN' ~ 'FORD',
manufacturer == 'MINI' ~ 'BMW',
manufacturer == 'SMART' ~ 'MERCEDES-BENZ',
TRUE ~ manufacturer)
) %>%
select(Model:Fuel, `Veh.Class`, `Air Pollution Score`,
`Greenhouse Gas Score`, SmartWay, cty_l100km:manufacturer) %>%
glimpse()
fuel_economy_2018 <- read_tsv("all_alpha_18.txt") %>%
mutate(cty_l100km = round(235.214583333333 / as.numeric(City.MPG), 2),
hwy_l100km = round(235.214583333333 / as.numeric(`Hwy.MPG`), 2),
combined_l100km = round(235.214583333333 / as.numeric(`Cmb.MPG`), 2)) %>%
mutate(manufacturer = word(Model)) %>%
mutate(manufacturer = case_when(
manufacturer == 'ACURA' ~ 'HONDA',
manufacturer == 'ASTON' ~ 'ASTON MARTIN',
manufacturer == 'ALFA' ~ 'FIAT',
manufacturer %in% c('BUICK', 'CADILLAC', 'CHEVROLET', 'GMC') ~ 'GENERAL MOTORS',
manufacturer %in% c('DODGE', 'JEEP', 'RAM') ~ 'CHRYSLER',
manufacturer == 'GENESIS' ~ 'HYUNDAI',
manufacturer == 'INFINITI' ~ 'NISSAN',
manufacturer == 'JAGUAR' | str_detect(manufacturer, '(^LAND|^RANGE)|ROVER') ~ 'TATA MOTORS',
manufacturer == 'LEXUS' ~ 'TOYOTA',
manufacturer == 'LINCOLN' ~ 'FORD',
manufacturer == 'MINI' ~ 'BMW',
manufacturer == 'SMART' ~ 'MERCEDES-BENZ',
TRUE ~ manufacturer)
) %>%
select(Model:Fuel, `Veh.Class`, `Air Pollution Score`,
`Greenhouse Gas Score`, SmartWay, cty_l100km:manufacturer) %>%
glimpse()
fuel_economy_2018<- read.table("C:/Users/Gabi/Downloads/all_alpha_18.txt", sep = "\t", header = TRUE)%>%
mutate(cty_l100km = round(235.214583333333 / as.numeric(City.MPG), 2),
hwy_l100km = round(235.214583333333 / as.numeric(`Hwy.MPG`), 2),
combined_l100km = round(235.214583333333 / as.numeric(`Cmb.MPG`), 2)) %>%
mutate(manufacturer = word(Model)) %>%
mutate(manufacturer = case_when(
manufacturer == 'ACURA' ~ 'HONDA',
manufacturer == 'ASTON' ~ 'ASTON MARTIN',
manufacturer == 'ALFA' ~ 'FIAT',
manufacturer %in% c('BUICK', 'CADILLAC', 'CHEVROLET', 'GMC') ~ 'GENERAL MOTORS',
manufacturer %in% c('DODGE', 'JEEP', 'RAM') ~ 'CHRYSLER',
manufacturer == 'GENESIS' ~ 'HYUNDAI',
manufacturer == 'INFINITI' ~ 'NISSAN',
manufacturer == 'JAGUAR' | str_detect(manufacturer, '(^LAND|^RANGE)|ROVER') ~ 'TATA MOTORS',
manufacturer == 'LEXUS' ~ 'TOYOTA',
manufacturer == 'LINCOLN' ~ 'FORD',
manufacturer == 'MINI' ~ 'BMW',
manufacturer == 'SMART' ~ 'MERCEDES-BENZ',
TRUE ~ manufacturer)
) %>%
select(Model:Fuel, `Veh.Class`, `Air Pollution Score`,
`Greenhouse Gas Score`, SmartWay, cty_l100km:manufacturer) %>%
glimpse()
fuel_economy_2018<- read.table("C:/Users/Gabi/Downloads/all_alpha_18.txt", sep = "\t", header = TRUE)
fuel_economy_2018 <- read_tsv("all_alpha_18.txt") %>%
mutate(cty_l100km = round(235.214583333333 / as.numeric(City.MPG), 2),
hwy_l100km = round(235.214583333333 / as.numeric(`Hwy.MPG`), 2),
combined_l100km = round(235.214583333333 / as.numeric(`Cmb.MPG`), 2)) %>%
mutate(manufacturer = word(Model)) %>%
mutate(manufacturer = case_when(
manufacturer == 'ACURA' ~ 'HONDA',
manufacturer == 'ASTON' ~ 'ASTON MARTIN',
manufacturer == 'ALFA' ~ 'FIAT',
manufacturer %in% c('BUICK', 'CADILLAC', 'CHEVROLET', 'GMC') ~ 'GENERAL MOTORS',
manufacturer %in% c('DODGE', 'JEEP', 'RAM') ~ 'CHRYSLER',
manufacturer == 'GENESIS' ~ 'HYUNDAI',
manufacturer == 'INFINITI' ~ 'NISSAN',
manufacturer == 'JAGUAR' | str_detect(manufacturer, '(^LAND|^RANGE)|ROVER') ~ 'TATA MOTORS',
manufacturer == 'LEXUS' ~ 'TOYOTA',
manufacturer == 'LINCOLN' ~ 'FORD',
manufacturer == 'MINI' ~ 'BMW',
manufacturer == 'SMART' ~ 'MERCEDES-BENZ',
TRUE ~ manufacturer)
) %>%
select(Model:Fuel, `Veh.Class`, `Air Pollution Score`,
`Greenhouse Gas Score`, SmartWay, cty_l100km:manufacturer) %>%
glimpse()
fuel_economy_2018<- read.table("C:\Users\Gabi\Downloads\all_alpha_18.txt", sep = "\t", header = TRUE)
fuel_economy_2018<- read.table("C:/Users/Gabi/Downloads/all_alpha_18.txt", sep = "\t", header = TRUE)
fuel_economy_2018 <- read_tsv("all_alpha_18.txt")
fuel_economy_2018<- read.table("C:/Users/Gabi/Downloads/all_alpha_18.txt", sep = "\t", header = TRUE)
fuel_economy_2018 <- read_tsv("C:/Users/Gabi/Downloads/all_alpha_18.txt") %>%
mutate(cty_l100km = round(235.214583333333 / as.numeric(City.MPG), 2),
hwy_l100km = round(235.214583333333 / as.numeric(`Hwy.MPG`), 2),
combined_l100km = round(235.214583333333 / as.numeric(`Cmb.MPG`), 2)) %>%
mutate(manufacturer = word(Model)) %>%
mutate(manufacturer = case_when(
manufacturer == 'ACURA' ~ 'HONDA',
manufacturer == 'ASTON' ~ 'ASTON MARTIN',
manufacturer == 'ALFA' ~ 'FIAT',
manufacturer %in% c('BUICK', 'CADILLAC', 'CHEVROLET', 'GMC') ~ 'GENERAL MOTORS',
manufacturer %in% c('DODGE', 'JEEP', 'RAM') ~ 'CHRYSLER',
manufacturer == 'GENESIS' ~ 'HYUNDAI',
manufacturer == 'INFINITI' ~ 'NISSAN',
manufacturer == 'JAGUAR' | str_detect(manufacturer, '(^LAND|^RANGE)|ROVER') ~ 'TATA MOTORS',
manufacturer == 'LEXUS' ~ 'TOYOTA',
manufacturer == 'LINCOLN' ~ 'FORD',
manufacturer == 'MINI' ~ 'BMW',
manufacturer == 'SMART' ~ 'MERCEDES-BENZ',
TRUE ~ manufacturer)
) %>%
select(Model:Fuel, `Veh.Class`, `Air Pollution Score`,
`Greenhouse Gas Score`, SmartWay, cty_l100km:manufacturer) %>%
glimpse()
glimpse()
select(Model:Fuel, `Veh.Class`, `Air Pollution Score`,
`Greenhouse Gas Score`, SmartWay, cty_l100km:manufacturer) %>%
glimpse()
fuel_economy_2018 <- read_tsv("C:/Users/Gabi/Downloads/all_alpha_18.txt") %>%
mutate(cty_l100km = round(235.214583333333 / as.numeric(City.MPG), 2),
hwy_l100km = round(235.214583333333 / as.numeric(`Hwy.MPG`), 2),
combined_l100km = round(235.214583333333 / as.numeric(`Cmb.MPG`), 2)) %>%
mutate(manufacturer = word(Model)) %>%
mutate(manufacturer = case_when(
manufacturer == 'ACURA' ~ 'HONDA',
manufacturer == 'ASTON' ~ 'ASTON MARTIN',
manufacturer == 'ALFA' ~ 'FIAT',
manufacturer %in% c('BUICK', 'CADILLAC', 'CHEVROLET', 'GMC') ~ 'GENERAL MOTORS',
manufacturer %in% c('DODGE', 'JEEP', 'RAM') ~ 'CHRYSLER',
manufacturer == 'GENESIS' ~ 'HYUNDAI',
manufacturer == 'INFINITI' ~ 'NISSAN',
manufacturer == 'JAGUAR' | str_detect(manufacturer, '(^LAND|^RANGE)|ROVER') ~ 'TATA MOTORS',
manufacturer == 'LEXUS' ~ 'TOYOTA',
manufacturer == 'LINCOLN' ~ 'FORD',
manufacturer == 'MINI' ~ 'BMW',
manufacturer == 'SMART' ~ 'MERCEDES-BENZ',
TRUE ~ manufacturer)
) %>%
select(Model:Fuel, `Veh.Class`, `Air Pollution Score`,
`Greenhouse Gas Score`, SmartWay, cty_l100km:manufacturer) %>%
glimpse()
fuel_economy_2018 <- read_tsv("C:/Users/Gabi/Downloads/all_alpha_18.txt") %>%
mutate(cty_l100km = round(235.214583333333 / as.numeric(`City.MPG`), 2),
hwy_l100km = round(235.214583333333 / as.numeric(`Hwy.MPG`), 2),
combined_l100km = round(235.214583333333 / as.numeric(`Cmb.MPG`), 2)) %>%
mutate(manufacturer = word(Model)) %>%
mutate(manufacturer = case_when(
manufacturer == 'ACURA' ~ 'HONDA',
manufacturer == 'ASTON' ~ 'ASTON MARTIN',
manufacturer == 'ALFA' ~ 'FIAT',
manufacturer %in% c('BUICK', 'CADILLAC', 'CHEVROLET', 'GMC') ~ 'GENERAL MOTORS',
manufacturer %in% c('DODGE', 'JEEP', 'RAM') ~ 'CHRYSLER',
manufacturer == 'GENESIS' ~ 'HYUNDAI',
manufacturer == 'INFINITI' ~ 'NISSAN',
manufacturer == 'JAGUAR' | str_detect(manufacturer, '(^LAND|^RANGE)|ROVER') ~ 'TATA MOTORS',
manufacturer == 'LEXUS' ~ 'TOYOTA',
manufacturer == 'LINCOLN' ~ 'FORD',
manufacturer == 'MINI' ~ 'BMW',
manufacturer == 'SMART' ~ 'MERCEDES-BENZ',
TRUE ~ manufacturer)
) %>%
select(Model:Fuel, `Veh.Class`, `Air Pollution Score`,
`Greenhouse Gas Score`, SmartWay, cty_l100km:manufacturer) %>%
glimpse()
fuel_economy_2018 <- read_tsv("C:/Users/Gabi/Downloads/all_alpha_18.txt") %>%
mutate(cty_l100km = round(235.214583333333 / as.numeric('City.MPG'), 2),
hwy_l100km = round(235.214583333333 / as.numeric(`Hwy.MPG`), 2),
combined_l100km = round(235.214583333333 / as.numeric(`Cmb.MPG`), 2)) %>%
mutate(manufacturer = word(Model)) %>%
mutate(manufacturer = case_when(
manufacturer == 'ACURA' ~ 'HONDA',
manufacturer == 'ASTON' ~ 'ASTON MARTIN',
manufacturer == 'ALFA' ~ 'FIAT',
manufacturer %in% c('BUICK', 'CADILLAC', 'CHEVROLET', 'GMC') ~ 'GENERAL MOTORS',
manufacturer %in% c('DODGE', 'JEEP', 'RAM') ~ 'CHRYSLER',
manufacturer == 'GENESIS' ~ 'HYUNDAI',
manufacturer == 'INFINITI' ~ 'NISSAN',
manufacturer == 'JAGUAR' | str_detect(manufacturer, '(^LAND|^RANGE)|ROVER') ~ 'TATA MOTORS',
manufacturer == 'LEXUS' ~ 'TOYOTA',
manufacturer == 'LINCOLN' ~ 'FORD',
manufacturer == 'MINI' ~ 'BMW',
manufacturer == 'SMART' ~ 'MERCEDES-BENZ',
TRUE ~ manufacturer)
) %>%
select(Model:Fuel, `Veh.Class`, `Air Pollution Score`,
`Greenhouse Gas Score`, SmartWay, cty_l100km:manufacturer) %>%
glimpse()
fuel_economy_2018<- read.table("C:/Users/Gabi/Downloads/all_alpha_18.txt", sep = "\t", header = TRUE)
fuel_economy_2018 <- read_tsv("C:/Users/Gabi/Downloads/all_alpha_18.txt") %>%
mutate(cty_l100km = round(235.214583333333 / as.numeric('City.MPG'), 2),
hwy_l100km = round(235.214583333333 / as.numeric('Hwy.MPG'), 2),
combined_l100km = round(235.214583333333 / as.numeric('Cmb.MPG'), 2)) %>%
mutate(manufacturer = word(Model)) %>%
mutate(manufacturer = case_when(
manufacturer == 'ACURA' ~ 'HONDA',
manufacturer == 'ASTON' ~ 'ASTON MARTIN',
manufacturer == 'ALFA' ~ 'FIAT',
manufacturer %in% c('BUICK', 'CADILLAC', 'CHEVROLET', 'GMC') ~ 'GENERAL MOTORS',
manufacturer %in% c('DODGE', 'JEEP', 'RAM') ~ 'CHRYSLER',
manufacturer == 'GENESIS' ~ 'HYUNDAI',
manufacturer == 'INFINITI' ~ 'NISSAN',
manufacturer == 'JAGUAR' | str_detect(manufacturer, '(^LAND|^RANGE)|ROVER') ~ 'TATA MOTORS',
manufacturer == 'LEXUS' ~ 'TOYOTA',
manufacturer == 'LINCOLN' ~ 'FORD',
manufacturer == 'MINI' ~ 'BMW',
manufacturer == 'SMART' ~ 'MERCEDES-BENZ',
TRUE ~ manufacturer)
) %>%
select(Model:Fuel, `Veh.Class`, `Air Pollution Score`,
`Greenhouse Gas Score`, SmartWay, cty_l100km:manufacturer) %>%
glimpse()
dplyr::last_dplyr_warnings()
fuel_economy_2018 <- read_tsv("C:/Users/Gabi/Downloads/all_alpha_18.txt") %>%
mutate(cty_l100km = round(235.214583333333 / as.numeric('City.MPG'), 2),
hwy_l100km = round(235.214583333333 / as.numeric('Hwy.MPG'), 2),
combined_l100km = round(235.214583333333 / as.numeric('Cmb.MPG'), 2)) %>%
mutate(manufacturer = word(Model)) %>%
mutate(manufacturer = case_when(
manufacturer == 'ACURA' ~ 'HONDA',
manufacturer == 'ASTON' ~ 'ASTON MARTIN',
manufacturer == 'ALFA' ~ 'FIAT',
manufacturer %in% c('BUICK', 'CADILLAC', 'CHEVROLET', 'GMC') ~ 'GENERAL MOTORS',
manufacturer %in% c('DODGE', 'JEEP', 'RAM') ~ 'CHRYSLER',
manufacturer == 'GENESIS' ~ 'HYUNDAI',
manufacturer == 'INFINITI' ~ 'NISSAN',
manufacturer == 'JAGUAR' | str_detect(manufacturer, '(^LAND|^RANGE)|ROVER') ~ 'TATA MOTORS',
manufacturer == 'LEXUS' ~ 'TOYOTA',
manufacturer == 'LINCOLN' ~ 'FORD',
manufacturer == 'MINI' ~ 'BMW',
manufacturer == 'SMART' ~ 'MERCEDES-BENZ',
TRUE ~ manufacturer)
) %>%
select(Model:Fuel, `Veh.Class`, `Air Pollution Score`,
`Greenhouse Gas Score`, SmartWay, cty_l100km:manufacturer) %>%
glimpse()
fuel_economy_2018 <- read_tsv("C:/Users/Gabi/Downloads/all_alpha_18.txt") %>%
mutate(cty_l100km = round(235.214583333333 / as.numeric('City.MPG'), 2),
hwy_l100km = round(235.214583333333 / as.numeric('Hwy.MPG'), 2),
combined_l100km = round(235.214583333333 / as.numeric('Cmb.MPG'), 2)) %>%
mutate(manufacturer = word(Model)) %>%
mutate(manufacturer = case_when(
manufacturer == 'ACURA' ~ 'HONDA',
manufacturer == 'ASTON' ~ 'ASTON MARTIN',
manufacturer == 'ALFA' ~ 'FIAT',
manufacturer %in% c('BUICK', 'CADILLAC', 'CHEVROLET', 'GMC') ~ 'GENERAL MOTORS',
manufacturer %in% c('DODGE', 'JEEP', 'RAM') ~ 'CHRYSLER',
manufacturer == 'GENESIS' ~ 'HYUNDAI',
manufacturer == 'INFINITI' ~ 'NISSAN',
manufacturer == 'JAGUAR' | str_detect(manufacturer, '(^LAND|^RANGE)|ROVER') ~ 'TATA MOTORS',
manufacturer == 'LEXUS' ~ 'TOYOTA',
manufacturer == 'LINCOLN' ~ 'FORD',
manufacturer == 'MINI' ~ 'BMW',
manufacturer == 'SMART' ~ 'MERCEDES-BENZ',
TRUE ~ manufacturer)
) %>%
select(Model:Fuel, 'Veh.Class', 'Air Pollution Score',
'Greenhouse Gas Score', SmartWay, cty_l100km:manufacturer) %>%
glimpse()
fuel_economy_2018 <- read_tsv("C:/Users/Gabi/Downloads/all_alpha_18.txt") %>%
mutate(cty_l100km = round(235.214583333333 / as.numeric("City.MPG"), 2),
hwy_l100km = round(235.214583333333 / as.numeric("Hwy.MPG"), 2),
combined_l100km = round(235.214583333333 / as.numeric("Cmb.MPG"), 2)) %>%
mutate(manufacturer = word(Model)) %>%
mutate(manufacturer = case_when(
manufacturer == 'ACURA' ~ 'HONDA',
manufacturer == 'ASTON' ~ 'ASTON MARTIN',
manufacturer == 'ALFA' ~ 'FIAT',
manufacturer %in% c('BUICK', 'CADILLAC', 'CHEVROLET', 'GMC') ~ 'GENERAL MOTORS',
manufacturer %in% c('DODGE', 'JEEP', 'RAM') ~ 'CHRYSLER',
manufacturer == 'GENESIS' ~ 'HYUNDAI',
manufacturer == 'INFINITI' ~ 'NISSAN',
manufacturer == 'JAGUAR' | str_detect(manufacturer, '(^LAND|^RANGE)|ROVER') ~ 'TATA MOTORS',
manufacturer == 'LEXUS' ~ 'TOYOTA',
manufacturer == 'LINCOLN' ~ 'FORD',
manufacturer == 'MINI' ~ 'BMW',
manufacturer == 'SMART' ~ 'MERCEDES-BENZ',
TRUE ~ manufacturer)
) %>%
select(Model:Fuel, 'Veh.Class', 'Air Pollution Score',
'Greenhouse Gas Score', SmartWay, cty_l100km:manufacturer) %>%
glimpse()
fuel_economy_2018 <- read_tsv("all_alpha_18.txt") %>%
fuel_economy_2018 %>%
mutate(cty_l100km = round(235.214583333333 / as.numeric(City.MPG), 2),
hwy_l100km = round(235.214583333333 / as.numeric(`Hwy.MPG`), 2),
combined_l100km = round(235.214583333333 / as.numeric(`Cmb.MPG`), 2)) %>%
mutate(manufacturer = word(Model)) %>%
mutate(manufacturer = case_when(
manufacturer == 'ACURA' ~ 'HONDA',
manufacturer == 'ASTON' ~ 'ASTON MARTIN',
manufacturer == 'ALFA' ~ 'FIAT',
manufacturer %in% c('BUICK', 'CADILLAC', 'CHEVROLET', 'GMC') ~ 'GENERAL MOTORS',
manufacturer %in% c('DODGE', 'JEEP', 'RAM') ~ 'CHRYSLER',
manufacturer == 'GENESIS' ~ 'HYUNDAI',
manufacturer == 'INFINITI' ~ 'NISSAN',
manufacturer == 'JAGUAR' | str_detect(manufacturer, '(^LAND|^RANGE)|ROVER') ~ 'TATA MOTORS',
manufacturer == 'LEXUS' ~ 'TOYOTA',
manufacturer == 'LINCOLN' ~ 'FORD',
manufacturer == 'MINI' ~ 'BMW',
manufacturer == 'SMART' ~ 'MERCEDES-BENZ',
TRUE ~ manufacturer)
) %>%
select(Model:Fuel, `Veh.Class`, `Air Pollution Score`,
`Greenhouse Gas Score`, SmartWay, cty_l100km:manufacturer) %>%
glimpse()
fuel_economy_2018 <- read_tsv("all_alpha_18.txt") %>%
mutate(cty_l100km = round(235.214583333333 / as.numeric(City.MPG), 2),
hwy_l100km = round(235.214583333333 / as.numeric(`Hwy.MPG`), 2),
combined_l100km = round(235.214583333333 / as.numeric(`Cmb.MPG`), 2)) %>%
mutate(manufacturer = word(Model)) %>%
mutate(manufacturer = case_when(
manufacturer == 'ACURA' ~ 'HONDA',
manufacturer == 'ASTON' ~ 'ASTON MARTIN',
manufacturer == 'ALFA' ~ 'FIAT',
manufacturer %in% c('BUICK', 'CADILLAC', 'CHEVROLET', 'GMC') ~ 'GENERAL MOTORS',
manufacturer %in% c('DODGE', 'JEEP', 'RAM') ~ 'CHRYSLER',
manufacturer == 'GENESIS' ~ 'HYUNDAI',
manufacturer == 'INFINITI' ~ 'NISSAN',
manufacturer == 'JAGUAR' | str_detect(manufacturer, '(^LAND|^RANGE)|ROVER') ~ 'TATA MOTORS',
manufacturer == 'LEXUS' ~ 'TOYOTA',
manufacturer == 'LINCOLN' ~ 'FORD',
manufacturer == 'MINI' ~ 'BMW',
manufacturer == 'SMART' ~ 'MERCEDES-BENZ',
TRUE ~ manufacturer)
) %>%
select(Model:Fuel, `Veh.Class`, `Air Pollution Score`,
`Greenhouse Gas Score`, SmartWay, cty_l100km:manufacturer) %>%
glimpse()
fuel_economy_2018 <- read_tsv("C:/Users/Gabi/Downloads/all_alpha_18.txt") %>%
mutate(cty_l100km = round(235.214583333333 / as.numeric(City.MPG), 2),
hwy_l100km = round(235.214583333333 / as.numeric(`Hwy.MPG`), 2),
combined_l100km = round(235.214583333333 / as.numeric(`Cmb.MPG`), 2)) %>%
mutate(manufacturer = word(Model)) %>%
mutate(manufacturer = case_when(
manufacturer == 'ACURA' ~ 'HONDA',
manufacturer == 'ASTON' ~ 'ASTON MARTIN',
manufacturer == 'ALFA' ~ 'FIAT',
manufacturer %in% c('BUICK', 'CADILLAC', 'CHEVROLET', 'GMC') ~ 'GENERAL MOTORS',
manufacturer %in% c('DODGE', 'JEEP', 'RAM') ~ 'CHRYSLER',
manufacturer == 'GENESIS' ~ 'HYUNDAI',
manufacturer == 'INFINITI' ~ 'NISSAN',
manufacturer == 'JAGUAR' | str_detect(manufacturer, '(^LAND|^RANGE)|ROVER') ~ 'TATA MOTORS',
manufacturer == 'LEXUS' ~ 'TOYOTA',
manufacturer == 'LINCOLN' ~ 'FORD',
manufacturer == 'MINI' ~ 'BMW',
manufacturer == 'SMART' ~ 'MERCEDES-BENZ',
TRUE ~ manufacturer)
) %>%
select(Model:Fuel, `Veh.Class`, `Air Pollution Score`,
`Greenhouse Gas Score`, SmartWay, cty_l100km:manufacturer) %>%
glimpse()
df <- fuel_economy_2018 %>%
transmute (cty_l100km, hwy_l100km,
air_pollution_score = `Air Pollution Score`,
greenhouse_gas_score = `Greenhouse Gas Score`,
vehicle_class = `Veh Class`) %>%
mutate (id = row_number()) %>%
pivot_longer(c(-id, -vehicle_class),
names_to = "variable", values_to = "value" ) %>%
arrange(variable, vehicle_class)
install.packages("tidyverse")
install.packages("corrr")
install.packages("corrgram")
install.packages("corrr")
install.packages("tidyverse")
install.packages("tidyverse")
options(scipen = 999)
library(tidyverse)
library(corrr)
library(corrgram)
library(readxl)
library(DataExplorer)
library(inspectdf)
install.packages("haven")
library(haven)
df <- read_dta("C:/Users/Gabi/Downloads/states.dta")
states <- as_tibble(state.x77, rownames = 'State')
names(states) <- str_replace_all(names(states), ' |\\.', '_')
head(states)
class(states)
glimpse(states)
states %>%
skimr::skim()
install.packages("skimr")
library(skimr)
install.packages("skimr")
library(skimr)
states %>%
skimr::skim()
missing_vals <- states %>%
map_int(., ~ sum(is.na(.) | . == 'N/A')) %>%
tibble(variable = names(.), n_missing = .) %>%
mutate (percent_missing = round(n_missing * 100 /
nrow(states), 2))
ggplot(missing_vals,
aes (x = variable, y = n_missing, fill = variable)) +
geom_col() +
coord_flip() +
geom_text(aes(label = paste0(percent_missing, '%'), size = 3.5,
hjust = if_else(percent_missing > 3, 1.02, -0.03),
vjust = 0.5))  +
theme(legend.position="none") + # this will remove the legend
scale_y_continuous(limits = c(0,170), breaks = seq(0, 170, 20))
eda_factors <- states %>%
mutate_if(is.factor, as.character) %>%
select_if(., is.character ) %>%
mutate (id = row_number()) %>%
pivot_longer(-id, names_to = "variable", values_to = "value" ) %>%
mutate (value = coalesce(value, 'N/A')) %>%
group_by(variable, value) %>%
summarise (n_value = n()) %>%
ungroup() %>%
mutate (percent = round(n_value * 100 / nrow(states),2)) %>%
arrange(variable, value)
# plot the factors values
eda_factors %>%
group_by(variable) %>%
summarise(n_of_values = n()) %>%
#     filter (n_of_values < 20) %>%
ungroup() %>%
dplyr::select (variable) %>%
inner_join(eda_factors) %>%
ggplot(., aes(x = value, y = n_value, fill = value)) +
geom_col() +
geom_text (aes(label = paste0(round(percent,0), '%'),
vjust = if_else(n_value > 300, 1.5, -0.5))) +
facet_wrap(~ variable, scale = "free") +
theme(legend.position="none") + # this will remove the legend
theme(axis.text.x = element_text(size = 10, angle = 45, hjust = 1)) +
theme(strip.text.x = element_text(size = 14)) +
xlab("") + ylab("frequency")
ggplot(missing_vals,
aes (x = variable, y = n_missing, fill = variable)) +
geom_col() +
coord_flip() +
geom_text(aes(label = paste0(percent_missing, '%'), size = 3.5,
hjust = if_else(percent_missing > 3, 1.02, -0.03),
vjust = 0.5))  +
theme(legend.position="none") + # this will remove the legend
scale_y_continuous(limits = c(0,170), breaks = seq(0, 170, 20))
# first, compute the frequencies for each categorical variables and values
eda_factors <- states %>%
mutate_if(is.factor, as.character) %>%
select_if(., is.character ) %>%
mutate (id = row_number()) %>%
pivot_longer(-id, names_to = "variable", values_to = "value" ) %>%
mutate (value = coalesce(value, 'N/A')) %>%
group_by(variable, value) %>%
summarise (n_value = n()) %>%
ungroup() %>%
mutate (percent = round(n_value * 100 / nrow(states),2)) %>%
arrange(variable, value)
View(eda_factors)
eda_factors %>%
group_by(variable) %>%
summarise(n_of_values = n()) %>%
#     filter (n_of_values < 20) %>%
ungroup() %>%
dplyr::select (variable) %>%
inner_join(eda_factors) %>%
ggplot(., aes(x = value, y = n_value, fill = value)) +
geom_col() +
geom_text (aes(label = paste0(round(percent,0), '%'),
vjust = if_else(n_value > 300, 1.5, -0.5))) +
facet_wrap(~ variable, scale = "free") +
theme(legend.position="none") + # this will remove the legend
theme(axis.text.x = element_text(size = 10, angle = 45, hjust = 1)) +
theme(strip.text.x = element_text(size = 14)) +
xlab("") + ylab("frequency")
install.packages('corr')
library(corrr)
corrgram::corrgram(states %>% dplyr::select (-State) %>% select_if(is.numeric),
lower.panel=panel.conf, upper.panel=panel.pts,
diag.panel=panel.density)
shiny::runApp('D:/LucrareLicenta/1.ShinyApp/IMDb_Movies_App')
runApp('D:/LucrareLicenta/1.ShinyApp/IMDb_Movies_App')
install.packages("shinythemes")
runApp('D:/LucrareLicenta/1.ShinyApp/IMDb_Movies_App')
install.packages("shinythemes")
runApp('D:/LucrareLicenta/1.ShinyApp/IMDb_Movies_App')
runApp('D:/LucrareLicenta/1.ShinyApp/IMDb_Movies_App')
runApp('D:/LucrareLicenta/1.ShinyApp/IMDb_Movies_App')
runApp('D:/LucrareLicenta/1.ShinyApp/IMDb_Movies_App')
